corr <- function(directory, threshold){
  data_vec <- NULL
  for(i in 1:332){
    id <- i
    x <- sprintf("%03d",i)
    dat <- read.csv(sprintf('~\\Downloads\\specdata\\%s.csv',x))
    data <- dat[complete.cases(dat),]
    if(nrow(data)>threshold){
      data_vec <- c(data_vec,cor(data["sulfate"], data["nitrate"]))
    }
  }
  data_vec
}

#output->
c<-corr("x", 400)
c
  [1] -0.018957541 -0.043897372 -0.068159562 -0.075888144  0.763128837 -0.157828603
  [7] -0.044898818  0.117249264  0.259057178  0.133274607  0.366201078  0.006863930
 [13]  0.726693888  0.057741676  0.115338086  0.465754012  0.515804375  0.375631176
 [19]  0.315725317  0.244560561  0.594426499  0.553514976  0.405022501  0.434789780
 [25]  0.088421364  0.118136697 -0.033091304  0.277220958 -0.049108453  0.091139374
 [31] -0.025750053 -0.061746831  0.041306963 -0.146202136 -0.097254393  0.089262856
 [37]  0.711864008  0.268203237  0.190644585  0.002864405 -0.042533572  0.098073855
 [43]  0.100212474 -0.063984344 -0.066525489 -0.089441210  0.100643502  0.036665921
 [49]  0.296744105  0.347421569  0.198915192  0.164602262  0.231984399  0.275903634
 [55]  0.248143145  0.002032940  0.085217423  0.010021716 -0.038785934  0.041917773
 [61]  0.596929143  0.113596590 -0.017703373  0.305506111  0.150031306  0.134895077
 [67]  0.172850003  0.286076203  0.337120085  0.424798956  0.095921881  0.022899033
 [73]  0.143330735  0.408741028  0.361728434 -0.035090337 -0.082388453 -0.094742313
 [79] -0.092398269 -0.053001162  0.010158287  0.295793699 -0.075214053  0.132207405
 [85]  0.089547098 -0.019086127  0.138387891 -0.003207550  0.017805647 -0.050287543
 [91]  0.016535643  0.355110474  0.589606340 -0.029094866 -0.074495323 -0.005386993
 [97]  0.258826380  0.144110820  0.074594252  0.256665139  0.162401158  0.190141976
[103] -0.176233152 -0.144699131  0.147074115  0.273520382  0.109557323 -0.092863394
[109] -0.089133895 -0.017185129 -0.156323514 -0.042538204 -0.009912754 -0.042910367
[115]  0.046211272 -0.060808231  0.160865053  0.598343330  0.506535631  0.191834811
[121] -0.024723462  0.518820173 -0.123172036  0.253978075  0.268780500  0.279397143
[127]  0.267260662
summary(c)
    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-0.17623 -0.03109  0.10021  0.13969  0.26849  0.76313 
